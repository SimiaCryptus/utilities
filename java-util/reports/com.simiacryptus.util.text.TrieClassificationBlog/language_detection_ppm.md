# Language Detection via PPM Compression
First, we load positive and negative sentiment tweets into two seperate models

Code from [TrieClassificationBlog.java:31](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L31) executed in 38.50 seconds: 
```java
      return new ArrayList<>(WikiArticle.ENGLISH.load().filter(x->x.getText().length()> minArticleSize)
              .limit(testingSize + trainingSize).collect(Collectors.toList()));
```

Returns: 
```
    [WikiArticle{title='Albedo'}, WikiArticle{title='A'}, WikiArticle{title='Achilles'}, WikiArticle{title='Abraham Lincoln'}, WikiArticle{title='Algeria'}, WikiArticle{title='List of Atlas Shrugged characters'}, WikiArticle{title='Anthropology'}, WikiArticle{title='Agricultural science'}, WikiArticle{title='Alchemy'}, WikiArticle{title='Astronomer'}, WikiArticle{title='Aldous Huxley'}, WikiArticle{title='Aberdeen (disambiguation)'}, WikiArticle{title='Algae'}, WikiArticle{title='Analysis of variance'}, WikiArticle{title='Apollo 11'}, WikiArticle{title='Apollo 8'}, WikiArticle{title='Astronaut'}, WikiArticle{title='A Modest Proposal'}, WikiArticle{title='Alkali metal'}, WikiArticle{title='Alphabet'}, WikiArticle{title='Atomic number'}, WikiArticle{title='Atlantic Ocean'}, WikiArticle{title='Angola'}, WikiArticle{title='Demographics of Angola'}, WikiArticle{title='Politics of Angola'}, WikiArticle{title='Economy of Angola'}, WikiArticle{title='Angolan Armed Forces'}, WikiArticle{title='Foreign relations of Angola'}, WikiArticle{title='Albert Sidney Johnston'}, WikiArticle{title='Android (robot)'}, WikiArticle{title='Agnostida'}, WikiArticle{title='Alismatales'}, WikiArticle{title='Apiales'}, WikiArticle{title='Asterales'}, WikiArticle{title='Asteroid'}, WikiArticle{title='Affidavit'}, WikiArticle{title='Aries (constellation)'}, WikiArticle{title='Aquarius (constellation)'}, WikiArticle{title='Altaic languages'}, WikiArticle{title='Austrian German'}, WikiArticle{title='Axiom of choice'}, WikiArticle{title='Aegean Sea'}, WikiArticle{title='A Clockwork Orange (novel)'}, WikiArticle{title='Amsterdam'}, WikiArticle{title='Agnosticism'}, WikiArticle{title='Argon'}, WikiArticle{title='Arsenic'}, WikiArticle{title='Anglican Communion'}, WikiArticle{title='Author'}, WikiArticle{title='Andrey Markov'}, WikiArticle{title='Antigua and Barbuda'}, WikiArticle{title='Azincourt'}, WikiArticle{title='Albert Speer'}, WikiArticle{title='Apiaceae'}, WikiArticle{title='Axon'}, WikiArticle{title='Aramaic alphabet'}, WikiArticle{title='Acute disseminated encephalomyelitis'}, WikiArticle{title='Ataxia'}, WikiArticle{title='Abdul Alhazred'}, WikiArticle{title='Ada Lovelace'}, WikiArticle{title='August Derleth'}, WikiArticle{title='Alps'}, WikiArticle{title='Albert Camus'}, WikiArticle{title='August 22'}, WikiArticle{title='August 27'}, WikiArticle{title='Alcohol'}, WikiArticle{title='Achill Island'}, WikiArticle{title='Allen Ginsberg'}, WikiArticle{title='Algebraically closed field'}, WikiArticle{title='August 6'}, WikiArticle{title='Anatoly Karpov'}, WikiArticle{title='Aspect ratio'}, WikiArticle{title='Auto racing'}, WikiArticle{title='André Gide'}, WikiArticle{title='Algorithms for calculating variance'}, WikiArticle{title='Almond'}, WikiArticle{title='Demographics of Antigua and Barbuda'}, WikiArticle{title='Politics of Antigua and Barbuda'}, WikiArticle{title='Royal Antigua and Barbuda Defence Force'}, WikiArticle{title='Politics of American Samoa'}, WikiArticle{title='Economy of American Samoa'}, WikiArticle{title='August 13'}, WikiArticle{title='The Ashes'}, WikiArticle{title='Analysis'}, WikiArticle{title='Abner Doubleday'}, WikiArticle{title='Amplitude modulation'}, WikiArticle{title='Augustin-Jean Fresnel'}, WikiArticle{title='Abbot'}, WikiArticle{title='Ardipithecus'}, WikiArticle{title='Assembly line'}, WikiArticle{title='Abbreviation'}, WikiArticle{title='Aphrodite'}, WikiArticle{title='April 1'}, WikiArticle{title='Aleister Crowley'}, WikiArticle{title='Afterlife'}, WikiArticle{title='Astrometry'}, WikiArticle{title='Atomic physics'}, WikiArticle{title='American Sign Language'}, WikiArticle{title='Applet'}, WikiArticle{title='Alternate history'}, WikiArticle{title='Atomic orbital'}, WikiArticle{title='Amino acid'}, WikiArticle{title='Alan Turing'}, WikiArticle{title='Area'}, WikiArticle{title='Artist'}, WikiArticle{title='Actaeon'}, WikiArticle{title='Acoustic theory'}, WikiArticle{title='Alexander Mackenzie (politician)'}, WikiArticle{title='Ashoka'}, WikiArticle{title='American (word)'}, WikiArticle{title='Extreme poverty'}, WikiArticle{title='Analytical Engine'}, WikiArticle{title='Augustus'}, WikiArticle{title='Geography of Antarctica'}, WikiArticle{title='Transport in Antarctica'}, WikiArticle{title='Geography of Alabama'}, WikiArticle{title='Apocrypha'}, WikiArticle{title='Antarctic Treaty System'}, WikiArticle{title='Alfred Lawson'}, WikiArticle{title='Ames, Iowa'}, WikiArticle{title='Abalone'}, WikiArticle{title='Abbess'}, WikiArticle{title='Abensberg'}, WikiArticle{title='Arabian Prince'}, WikiArticle{title='August 7'}, WikiArticle{title='August 8'}, WikiArticle{title='April 16'}, WikiArticle{title='Associative property'}, WikiArticle{title='Apache Software Foundation'}, WikiArticle{title='Americans with Disabilities Act of 1990'}, WikiArticle{title='Apple I'}, WikiArticle{title='Allosaurus'}, WikiArticle{title='AK-47'}, WikiArticle{title='Atanasoff–Berry computer'}, WikiArticle{title='Ambrosia'}, WikiArticle{title='Ambracia'}, WikiArticle{title='Amber'}, WikiArticle{title='Amalaric'}, WikiArticle{title='Alphorn'}, WikiArticle{title='Army'}, WikiArticle{title='Alligatoridae'}, WikiArticle{title='Alder'}, WikiArticle{title='Amos Bronson Alcott'}, WikiArticle{title='Arachnophobia'}, WikiArticle{title='Alabaster'}, WikiArticle{title='Ahab'}, WikiArticle{title='Algol'}, WikiArticle{title='Adiabatic process'}, WikiArticle{title='Amide'}, WikiArticle{title='Animism'}, WikiArticle{title='Antonio Vivaldi'}, WikiArticle{title='Adrian'}, WikiArticle{title='Aare'}, WikiArticle{title='Abbotsford House'}, WikiArticle{title='Abraham'}, WikiArticle{title='Abraxas'}, WikiArticle{title='Absalom'}, WikiArticle{title='Abydos, Egypt'}, WikiArticle{title='Abydos (Hellespont)'}, WikiArticle{title='August 15'}, WikiArticle{title='Acacia sensu lato'}, WikiArticle{title='August 16'}, WikiArticle{title='Alan Kay'}, WikiArticle{title='NYSE MKT'}, WikiArticle{title='August 17'}, WikiArticle{title='August 12'}, WikiArticle{title='Alfred Russel Wallace'}, WikiArticle{title='Australian Labor Party'}, WikiArticle{title='August 18'}, WikiArticle{title='August 19'}, WikiArticle{title='August 21'}, WikiArticle{title='Dodo (Alice's Adventures in Wonderland)'}, WikiArticle{title='Albert Alcibiades, Margrave of Brandenburg-Kulmbach'}, WikiArticle{title='Albert the Bear'}, WikiArticle{title='Albert of Brandenburg'}, WikiArticle{title='Albert, Duke of Prussia'}, WikiArticle{title='April 13'}, WikiArticle{title='Amaranth'}, WikiArticle{title='Agamemnon'}, WikiArticle{title='Aga Khan I'}, WikiArticle{title='Aga Khan III'}, WikiArticle{title='Alexander Agassiz'}, WikiArticle{title='Agathon'}, WikiArticle{title='Agesilaus II'}, WikiArticle{title='Ajax (mythology)'}, WikiArticle{title='Ajax'}, WikiArticle{title='Alaric I'}, WikiArticle{title='Alaric II'}, WikiArticle{title='Albertus Magnus'}, WikiArticle{title='Alboin'}, WikiArticle{title='Afonso de Albuquerque'}, WikiArticle{title='Alcaeus of Mytilene'}, WikiArticle{title='Alcidamas'}, WikiArticle{title='Aldine Press'}, WikiArticle{title='Ealdred (archbishop of York)'}, WikiArticle{title='Alexander I of Epirus'}, WikiArticle{title='Alexander Balas'}, WikiArticle{title='Alexander of Pherae'}, WikiArticle{title='Alexander II of Epirus'}, WikiArticle{title='Alexander Jagiellon'}]
```
Code from [TrieClassificationBlog.java:35](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L35) executed in 44.61 seconds: 
```java
      return new ArrayList<>(WikiArticle.FRENCH.load().filter(x->x.getText().length()> minArticleSize)
              .limit(testingSize + trainingSize).collect(Collectors.toList()));
```

Returns: 
```
    [WikiArticle{title='Allier (département)'}, WikiArticle{title='Alpes-de-Haute-Provence'}, WikiArticle{title='Alpes-Maritimes'}, WikiArticle{title='Ardèche (département)'}, WikiArticle{title='Ariège (département)'}, WikiArticle{title='Amérique du Sud'}, WikiArticle{title='Abréviations en informatique C'}, WikiArticle{title='Akhenaton (rappeur)'}, WikiArticle{title='Art amarnien'}, WikiArticle{title='Akhenaton'}, WikiArticle{title='Atari ST'}, WikiArticle{title='Amon'}, WikiArticle{title='Akihabara'}, WikiArticle{title='Antiquité'}, WikiArticle{title='Assistant personnel'}, WikiArticle{title='Apple I'}, WikiArticle{title='Ampère'}, WikiArticle{title='Aston Martin'}, WikiArticle{title='Azote'}, WikiArticle{title='Asie'}, WikiArticle{title='Abréviations en informatique B'}, WikiArticle{title='Abréviations en informatique D'}, WikiArticle{title='Abréviations en informatique S'}, WikiArticle{title='Acier'}, WikiArticle{title='Albert King'}, WikiArticle{title='Alberta'}, WikiArticle{title='Asthme'}, WikiArticle{title='Arvo Pärt'}, WikiArticle{title='Akseli Gallen-Kallela'}, WikiArticle{title='America Online'}, WikiArticle{title='Alphabet phonétique international'}, WikiArticle{title='Anarchie'}, WikiArticle{title='Astéroïde'}, WikiArticle{title='Albanais'}, WikiArticle{title='Aruba'}, WikiArticle{title='Accusatif'}, WikiArticle{title='Arthur Honegger'}, WikiArticle{title='Alain-Fournier'}, WikiArticle{title='Antonin Artaud'}, WikiArticle{title='Lampe à incandescence classique'}, WikiArticle{title='Lampe à incandescence halogène'}, WikiArticle{title='Alcatel'}, WikiArticle{title='Juillet 2003'}, WikiArticle{title='Archaea'}, WikiArticle{title='Ahmôsis II'}, WikiArticle{title='Aldous Huxley'}, WikiArticle{title='Amenhotep III'}, WikiArticle{title='Aviation civile'}, WikiArticle{title='Auteur-compositeur-interprète'}, WikiArticle{title='Animisme'}, WikiArticle{title='Anthropologie religieuse'}, WikiArticle{title='Alphabet phonétique de l'OTAN'}, WikiArticle{title='Politique en Arabie saoudite'}, WikiArticle{title='Blender'}, WikiArticle{title='Biologie moléculaire'}, WikiArticle{title='Bruxelles'}, WikiArticle{title='Forme de Backus-Naur'}, WikiArticle{title='Bourgogne'}, WikiArticle{title='Basse-Normandie'}, WikiArticle{title='Bas-Rhin'}, WikiArticle{title='Bouches-du-Rhône'}, WikiArticle{title='Beaujolais'}, WikiArticle{title='Baal'}, WikiArticle{title='Baba'}, WikiArticle{title='Bès'}, WikiArticle{title='PCI (informatique)'}, WikiArticle{title='Bruno Mégret'}, WikiArticle{title='Billy Wilder'}, WikiArticle{title='Bille August'}, WikiArticle{title='BASIC'}, WikiArticle{title='Beffroi'}, WikiArticle{title='Base de données'}, WikiArticle{title='Bit'}, WikiArticle{title='Basket-ball'}, WikiArticle{title='Blonde Redhead'}, WikiArticle{title='Benoît Mandelbrot'}, WikiArticle{title='Brian Kernighan'}, WikiArticle{title='Buffy contre les vampires'}, WikiArticle{title='Liste des épisodes de Buffy contre les vampires'}, WikiArticle{title='Bengali'}, WikiArticle{title='Boris Karloff'}, WikiArticle{title='Bahreïn'}, WikiArticle{title='Belize'}, WikiArticle{title='Buzz Aldrin'}, WikiArticle{title='Biophysique'}, WikiArticle{title='Cryptographie'}, WikiArticle{title='Conquête (roman)'}, WikiArticle{title='Carl Sagan'}, WikiArticle{title='Cryptographie symétrique'}, WikiArticle{title='Client-serveur'}, WikiArticle{title='Clovis Ier'}, WikiArticle{title='Clotaire Ier'}, WikiArticle{title='Chronologie'}, WikiArticle{title='Côte-d'Or'}, WikiArticle{title='Collège en France'}, WikiArticle{title='The World Factbook'}, WikiArticle{title='Carolingiens'}, WikiArticle{title='Grand Châtelet'}, WikiArticle{title='Capitale'}, WikiArticle{title='Coupe du monde de football de 2002'}, WikiArticle{title='Liste des communes de la Gironde'}, WikiArticle{title='Liste des communes des Landes'}, WikiArticle{title='Culture des États-Unis'}, WikiArticle{title='Liste des communes de l'Aisne'}, WikiArticle{title='Liste des communes des Alpes-de-Haute-Provence'}, WikiArticle{title='Liste des communes de l'Aube'}, WikiArticle{title='Liste des communes de l'Aude'}, WikiArticle{title='Liste des communes de l'Aveyron'}, WikiArticle{title='Liste des communes des Bouches-du-Rhône'}, WikiArticle{title='Liste des communes du Calvados'}, WikiArticle{title='Liste des communes du Cantal'}, WikiArticle{title='Liste des communes du Cher'}, WikiArticle{title='Liste des communes de la Corrèze'}, WikiArticle{title='Comète'}, WikiArticle{title='Counter-Strike'}, WikiArticle{title='1P/Halley'}, WikiArticle{title='Carélien'}, WikiArticle{title='Cyclades'}, WikiArticle{title='Chiba'}, WikiArticle{title='Liste de compositeurs'}, WikiArticle{title='Calligramme'}, WikiArticle{title='Conte'}, WikiArticle{title='Cas grammatical'}, WikiArticle{title='Cryptologie'}, WikiArticle{title='Charles-Augustin Coulomb'}, WikiArticle{title='Commodore 64'}, WikiArticle{title='Cryptographie asymétrique'}, WikiArticle{title='Coréen'}, WikiArticle{title='Cuisine mexicaine'}, WikiArticle{title='Calcul distribué'}, WikiArticle{title='Chlore'}, WikiArticle{title='Carbone'}, WikiArticle{title='Caféine'}, WikiArticle{title='Conseil national de la protection de la nature'}, WikiArticle{title='Contrepèterie'}, WikiArticle{title='Calypso (homonymie)'}, WikiArticle{title='Carole Lombard'}, WikiArticle{title='Chiropratique'}, WikiArticle{title='Carnivora'}, WikiArticle{title='Couche d'ozone'}, WikiArticle{title='Count Ossie'}, WikiArticle{title='Chris Blackwell'}, WikiArticle{title='Cuisine des États-Unis'}, WikiArticle{title='Danemark'}, WikiArticle{title='Recherche dichotomique'}, WikiArticle{title='Dagobert Ier'}, WikiArticle{title='Opération Tempête du désert'}, WikiArticle{title='Département français'}, WikiArticle{title='Doubs (département)'}, WikiArticle{title='Deux-Sèvres'}, WikiArticle{title='Daniel Gluckstein'}, WikiArticle{title='David Lynch'}, WikiArticle{title='Dublin'}, WikiArticle{title='D. H. Lawrence'}, WikiArticle{title='Divertissement'}, WikiArticle{title='D'Ieteren'}, WikiArticle{title='David McNeil'}, WikiArticle{title='Dark City'}, WikiArticle{title='Dungeon Siege'}, WikiArticle{title='Liste des dirigeants de l'Union soviétique'}, WikiArticle{title='Deir el-Médineh'}, WikiArticle{title='Droit'}, WikiArticle{title='Droit international public'}, WikiArticle{title='Liste de divinités égyptiennes par ville'}, WikiArticle{title='Dune (roman)'}, WikiArticle{title='Donjon'}, WikiArticle{title='Dominique (pays)'}, WikiArticle{title='Dictionnaire'}, WikiArticle{title='Liste de divinités égyptiennes par ordre alphabétique'}, WikiArticle{title='Dreamcast'}, WikiArticle{title='Disc jockey'}, WikiArticle{title='Do it yourself'}, WikiArticle{title='Dubplate'}, WikiArticle{title='Duke Reid'}, WikiArticle{title='Don Drummond'}, WikiArticle{title='Espéranto'}, WikiArticle{title='Eure-et-Loir'}, WikiArticle{title='Espace de Hilbert'}, WikiArticle{title='Enron'}, WikiArticle{title='Eukaryota'}, WikiArticle{title='Ensemble'}, WikiArticle{title='Ethernet'}, WikiArticle{title='GNU Emacs'}, WikiArticle{title='Eicosane'}, WikiArticle{title='Estonien'}, WikiArticle{title='Espace vectoriel'}, WikiArticle{title='Émile Benveniste'}, WikiArticle{title='Espèce disparue'}, WikiArticle{title='Espèce menacée'}, WikiArticle{title='Edward Evan Evans-Pritchard'}, WikiArticle{title='Edward Tylor'}, WikiArticle{title='Finlande'}, WikiArticle{title='Fournisseur d'accès à Internet'}, WikiArticle{title='François Bayrou'}, WikiArticle{title='Front national (parti français)'}, WikiArticle{title='Filtre'}, WikiArticle{title='Fonds monétaire international'}, WikiArticle{title='Freenet'}, WikiArticle{title='France Télécom'}, WikiArticle{title='Ariane (fusée)'}]
```
Code from [TrieClassificationBlog.java:39](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L39) executed in 37.09 seconds: 
```java
      CharTrie charTrie = CharTrieIndex.indexFulltext(english.subList(0,trainingSize)
              .stream().map(x->x.getText()).collect(Collectors.toList()), maxLevels, minWeight);
      print(charTrie);
      return charTrie;
```
Logging: 
```
    Total Indexed Document (KB): 4208
    Total Node Count: 908358
    Total Index Memory Size (KB): 24577
    
```

Returns: 
```
    com.simiacryptus.util.text.CharTrieIndex@ecba4e92
```
Code from [TrieClassificationBlog.java:45](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L45) executed in 26.83 seconds: 
```java
      CharTrie charTrie = CharTrieIndex.indexFulltext(french.subList(testingSize,french.size())
              .stream().map(x->x.getText()).collect(Collectors.toList()), maxLevels, minWeight);
      print(charTrie);
      return charTrie;
```
Logging: 
```
    Total Indexed Document (KB): 3335
    Total Node Count: 674024
    Total Index Memory Size (KB): 24577
    
```

Returns: 
```
    com.simiacryptus.util.text.CharTrieIndex@6ad13a40
```
Each model can be used out-of-the-box to perform classification:

Code from [TrieClassificationBlog.java:52](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L52) executed in 85.10 seconds: 
```java
      NodewalkerCodec codecA = trieEnglish.getCodec();
      NodewalkerCodec codecB = trieFrench.getCodec();
      double englishAccuracy = 100.0 * english.stream().limit(testingSize).mapToDouble(tweet -> {
          Bits encodeB = codecB.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          Bits encodeA = codecA.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          return (encodeB.bitLength > encodeA.bitLength) ? 1 : 0;
      }).average().getAsDouble();
      double frenchAccuracy = 100.0 * french.stream().limit(testingSize).mapToDouble(tweet -> {
          Bits encodeB = codecB.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          Bits encodeA = codecA.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          return (encodeB.bitLength < encodeA.bitLength) ? 1 : 0;
      }).average().getAsDouble();
      return String.format("Accuracy = %.3f%%, %.3f%%", englishAccuracy, frenchAccuracy);
```

Returns: 
```
    Accuracy = 100.000%, 100.000%
```
