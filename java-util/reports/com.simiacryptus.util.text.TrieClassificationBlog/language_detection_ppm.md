# Language Detection via PPM Compression
First, we load English and French wikipedia articles into two collections

Code from [TrieClassificationBlog.java:30](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L30) executed in 0.21 seconds: 
```java
      return new ArrayList<>(WikiArticle.ENGLISH.load().filter(x->x.getText().length()> minArticleSize)
              .limit(testingSize + trainingSize).collect(Collectors.toList()));
```

Returns: 
```
    [WikiArticle{title='Anarchism'}, WikiArticle{title='Autism'}, WikiArticle{title='Albedo'}, WikiArticle{title='A'}, WikiArticle{title='Alabama'}, WikiArticle{title='Achilles'}, WikiArticle{title='Abraham Lincoln'}, WikiArticle{title='Aristotle'}, WikiArticle{title='An American in Paris'}, WikiArticle{title='Academy Award for Best Production Design'}, WikiArticle{title='Academy Awards'}, WikiArticle{title='Actrius'}, WikiArticle{title='Animalia (book)'}, WikiArticle{title='International Atomic Time'}, WikiArticle{title='Altruism'}, WikiArticle{title='Ayn Rand'}, WikiArticle{title='Alain Connes'}, WikiArticle{title='Allan Dwan'}, WikiArticle{title='Algeria'}, WikiArticle{title='List of Atlas Shrugged characters'}, WikiArticle{title='Anthropology'}, WikiArticle{title='Agricultural science'}, WikiArticle{title='Alchemy'}, WikiArticle{title='Astronomer'}, WikiArticle{title='ASCII'}, WikiArticle{title='Animation'}, WikiArticle{title='Apollo'}, WikiArticle{title='Andre Agassi'}, WikiArticle{title='Austroasiatic languages'}, WikiArticle{title='Afroasiatic languages'}, WikiArticle{title='Andorra'}, WikiArticle{title='Arithmetic mean'}, WikiArticle{title='American Football Conference'}, WikiArticle{title='Animal Farm'}, WikiArticle{title='Amphibian'}, WikiArticle{title='Alaska'}, WikiArticle{title='Agriculture'}, WikiArticle{title='Aldous Huxley'}, WikiArticle{title='Aberdeen (disambiguation)'}, WikiArticle{title='Algae'}, WikiArticle{title='Analysis of variance'}, WikiArticle{title='Alkane'}, WikiArticle{title='Appellate procedure in the United States'}, WikiArticle{title='Appellate court'}, WikiArticle{title='Arraignment'}, WikiArticle{title='America the Beautiful'}, WikiArticle{title='Assistive technology'}, WikiArticle{title='Abacus'}, WikiArticle{title='Acid'}, WikiArticle{title='Asphalt'}, WikiArticle{title='American National Standards Institute'}, WikiArticle{title='Apollo 11'}, WikiArticle{title='Apollo 8'}, WikiArticle{title='Astronaut'}, WikiArticle{title='A Modest Proposal'}, WikiArticle{title='Alkali metal'}, WikiArticle{title='Alphabet'}, WikiArticle{title='Atomic number'}, WikiArticle{title='Anatomy'}, WikiArticle{title='Andrei Tarkovsky'}, WikiArticle{title='Ambiguity'}, WikiArticle{title='Animal (disambiguation)'}, WikiArticle{title='Aardvark'}, WikiArticle{title='Aardwolf'}, WikiArticle{title='Adobe'}, WikiArticle{title='Adventure'}, WikiArticle{title='Asia'}, WikiArticle{title='Aruba'}, WikiArticle{title='Articles of Confederation'}, WikiArticle{title='Atlantic Ocean'}, WikiArticle{title='Arthur Schopenhauer'}, WikiArticle{title='Angola'}, WikiArticle{title='Demographics of Angola'}, WikiArticle{title='Politics of Angola'}, WikiArticle{title='Economy of Angola'}, WikiArticle{title='Angolan Armed Forces'}, WikiArticle{title='Foreign relations of Angola'}, WikiArticle{title='Albert Sidney Johnston'}, WikiArticle{title='Android (robot)'}, WikiArticle{title='Alberta'}, WikiArticle{title='List of anthropologists'}, WikiArticle{title='Actinopterygii'}, WikiArticle{title='Albert Einstein'}, WikiArticle{title='Afghanistan'}, WikiArticle{title='Albania'}, WikiArticle{title='Allah'}, WikiArticle{title='Azerbaijan'}, WikiArticle{title='Amateur astronomy'}, WikiArticle{title='Aikido'}, WikiArticle{title='Art'}, WikiArticle{title='Agnostida'}, WikiArticle{title='Abortion'}, WikiArticle{title='American Revolutionary War'}, WikiArticle{title='Ampere'}, WikiArticle{title='Algorithm'}, WikiArticle{title='Annual plant'}, WikiArticle{title='Atlas (disambiguation)'}, WikiArticle{title='Mouthwash'}, WikiArticle{title='Alexander the Great'}, WikiArticle{title='Alfred Korzybski'}, WikiArticle{title='Asteroids (video game)'}, WikiArticle{title='Asparagales'}, WikiArticle{title='Alismatales'}, WikiArticle{title='Apiales'}, WikiArticle{title='Asterales'}, WikiArticle{title='Asteroid'}, WikiArticle{title='Affidavit'}, WikiArticle{title='Aries (constellation)'}, WikiArticle{title='Aquarius (constellation)'}, WikiArticle{title='Anime'}, WikiArticle{title='Ankara'}, WikiArticle{title='Arabic'}, WikiArticle{title='Alfred Hitchcock'}, WikiArticle{title='Anaconda'}, WikiArticle{title='Altaic languages'}, WikiArticle{title='Austrian German'}, WikiArticle{title='Axiom of choice'}, WikiArticle{title='Attila'}, WikiArticle{title='Aegean Sea'}, WikiArticle{title='A Clockwork Orange (novel)'}, WikiArticle{title='Amsterdam'}, WikiArticle{title='Audi'}, WikiArticle{title='Aircraft'}, WikiArticle{title='Alfred Nobel'}, WikiArticle{title='Alexander Graham Bell'}, WikiArticle{title='Anatolia'}, WikiArticle{title='Apple Inc.'}, WikiArticle{title='Aberdeenshire'}, WikiArticle{title='Aztlan Underground'}, WikiArticle{title='American Civil War'}, WikiArticle{title='Andy Warhol'}, WikiArticle{title='Alp Arslan'}, WikiArticle{title='American Film Institute'}, WikiArticle{title='Akira Kurosawa'}, WikiArticle{title='Ancient Egypt'}, WikiArticle{title='Motor neuron disease'}, WikiArticle{title='Abjad'}, WikiArticle{title='Abugida'}, WikiArticle{title='ABBA'}, WikiArticle{title='Allegiance'}, WikiArticle{title='MessagePad'}, WikiArticle{title='A. E. van Vogt'}, WikiArticle{title='Anna Kournikova'}, WikiArticle{title='Alfons Maria Jakob'}, WikiArticle{title='Agnosticism'}, WikiArticle{title='Argon'}, WikiArticle{title='Arsenic'}, WikiArticle{title='Antimony'}, WikiArticle{title='Actinium'}, WikiArticle{title='Americium'}, WikiArticle{title='Astatine'}, WikiArticle{title='Atom'}, WikiArticle{title='Arable land'}, WikiArticle{title='Aluminium'}, WikiArticle{title='Advanced Chemistry'}, WikiArticle{title='Anglican Communion'}, WikiArticle{title='Author'}, WikiArticle{title='Andrey Markov'}, WikiArticle{title='Angst'}, WikiArticle{title='Anxiety'}, WikiArticle{title='A. A. Milne'}, WikiArticle{title='Asociación Alumni'}, WikiArticle{title='Axiom'}, WikiArticle{title='Alpha'}, WikiArticle{title='Alvin Toffler'}, WikiArticle{title='The Amazing Spider-Man'}, WikiArticle{title='Antigua and Barbuda'}, WikiArticle{title='Azincourt'}, WikiArticle{title='Albert Speer'}, WikiArticle{title='Asteraceae'}, WikiArticle{title='Apiaceae'}, WikiArticle{title='Axon'}, WikiArticle{title='Aramaic alphabet'}, WikiArticle{title='Acute disseminated encephalomyelitis'}, WikiArticle{title='Ataxia'}, WikiArticle{title='Abdul Alhazred'}, WikiArticle{title='Ada Lovelace'}, WikiArticle{title='August Derleth'}, WikiArticle{title='Alps'}, WikiArticle{title='Albert Camus'}, WikiArticle{title='Agatha Christie'}, WikiArticle{title='The Plague'}, WikiArticle{title='Applied ethics'}, WikiArticle{title='Absolute value'}, WikiArticle{title='Analog signal'}, WikiArticle{title='Hercule Poirot'}, WikiArticle{title='Miss Marple'}, WikiArticle{title='April'}, WikiArticle{title='August'}, WikiArticle{title='Aaron'}, WikiArticle{title='April 6'}, WikiArticle{title='April 12'}, WikiArticle{title='April 15'}, WikiArticle{title='April 30'}, WikiArticle{title='August 22'}, WikiArticle{title='August 27'}, WikiArticle{title='Alcohol'}, WikiArticle{title='Achill Island'}, WikiArticle{title='Allen Ginsberg'}, WikiArticle{title='Algebraically closed field'}]
```
Code from [TrieClassificationBlog.java:34](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L34) executed in 0.15 seconds: 
```java
      return new ArrayList<>(WikiArticle.FRENCH.load().filter(x->x.getText().length()> minArticleSize)
              .limit(testingSize + trainingSize).collect(Collectors.toList()));
```

Returns: 
```
    [WikiArticle{title='Antoine Meillet'}, WikiArticle{title='Algèbre linéaire'}, WikiArticle{title='Algorithmique'}, WikiArticle{title='Politique en Argentine'}, WikiArticle{title='Armée républicaine irlandaise'}, WikiArticle{title='Autriche'}, WikiArticle{title='Arc de triomphe de l'Étoile'}, WikiArticle{title='Arsène Lupin'}, WikiArticle{title='Algorithme'}, WikiArticle{title='Afghanistan'}, WikiArticle{title='Algèbre de Boole (logique)'}, WikiArticle{title='Ada (langage)'}, WikiArticle{title='Auvergne'}, WikiArticle{title='Aisne (département)'}, WikiArticle{title='Allier (département)'}, WikiArticle{title='Alpes-de-Haute-Provence'}, WikiArticle{title='Alpes-Maritimes'}, WikiArticle{title='Ardèche (département)'}, WikiArticle{title='Ariège (département)'}, WikiArticle{title='Aube (département)'}, WikiArticle{title='Aude (département)'}, WikiArticle{title='Aveyron (département)'}, WikiArticle{title='Argentine'}, WikiArticle{title='Akira Kurosawa'}, WikiArticle{title='Afrique du Sud'}, WikiArticle{title='Aïkido'}, WikiArticle{title='Alliage'}, WikiArticle{title='Arabie saoudite'}, WikiArticle{title='Arménie'}, WikiArticle{title='Angola'}, WikiArticle{title='Andorre'}, WikiArticle{title='Antigua-et-Barbuda'}, WikiArticle{title='Attributs du pharaon'}, WikiArticle{title='Advanced Micro Devices'}, WikiArticle{title='Apple'}, WikiArticle{title='Astronomie'}, WikiArticle{title='Acteur de films pornographiques'}, WikiArticle{title='Abréviation'}, WikiArticle{title='Abréviations en informatique A'}, WikiArticle{title='Antoine de Saint-Exupéry'}, WikiArticle{title='Accelerated Graphics Port'}, WikiArticle{title='Abréviations en informatique M'}, WikiArticle{title='Atoum'}, WikiArticle{title='Aton'}, WikiArticle{title='Abréviations en informatique P'}, WikiArticle{title='Association francophone des utilisateurs de logiciels libres'}, WikiArticle{title='Art ASCII'}, WikiArticle{title='Alger'}, WikiArticle{title='Amérique du Sud'}, WikiArticle{title='Abréviations en informatique C'}, WikiArticle{title='Akhenaton (rappeur)'}, WikiArticle{title='Art amarnien'}, WikiArticle{title='Akhenaton'}, WikiArticle{title='Atari ST'}, WikiArticle{title='Amon'}, WikiArticle{title='Akihabara'}, WikiArticle{title='Antiquité'}, WikiArticle{title='Assistant personnel'}, WikiArticle{title='Apple I'}, WikiArticle{title='Ampère'}, WikiArticle{title='Anubis'}, WikiArticle{title='Apis'}, WikiArticle{title='Armement médiéval'}, WikiArticle{title='Archéologie sous-marine'}, WikiArticle{title='Arlette Laguiller'}, WikiArticle{title='Alain Madelin'}, WikiArticle{title='Alejandro Toledo'}, WikiArticle{title='Agriculture de précision'}, WikiArticle{title='Sid Meier's Alpha Centauri'}, WikiArticle{title='Alfred Hitchcock'}, WikiArticle{title='Anime'}, WikiArticle{title='Anthropologie'}, WikiArticle{title='Anvers'}, WikiArticle{title='Aston Martin'}, WikiArticle{title='Azote'}, WikiArticle{title='Asie'}, WikiArticle{title='Abréviations en informatique B'}, WikiArticle{title='Abréviations en informatique D'}, WikiArticle{title='Abréviations en informatique S'}, WikiArticle{title='Acier'}, WikiArticle{title='Albert King'}, WikiArticle{title='Architecture'}, WikiArticle{title='Anarchisme'}, WikiArticle{title='Liste d'architectes'}, WikiArticle{title='Afrique'}, WikiArticle{title='Andalousie'}, WikiArticle{title='American Standard Code for Information Interchange'}, WikiArticle{title='American National Standards Institute'}, WikiArticle{title='Atome'}, WikiArticle{title='Agriculture en Arabie saoudite'}, WikiArticle{title='Amharique'}, WikiArticle{title='André Gide'}, WikiArticle{title='Liste d'archéologues'}, WikiArticle{title='Alfred Nobel'}, WikiArticle{title='Alcène'}, WikiArticle{title='Ange (homonymie)'}, WikiArticle{title='Amstrad CPC 464'}, WikiArticle{title='Amphétamine'}, WikiArticle{title='Amstrad'}, WikiArticle{title='Amsterdam'}, WikiArticle{title='Aéronautique'}, WikiArticle{title='Contrôle de la circulation aérienne'}, WikiArticle{title='Art nouveau'}, WikiArticle{title='Aurélien Sauvageot'}, WikiArticle{title='Affixe'}, WikiArticle{title='Allemand'}, WikiArticle{title='Alberta'}, WikiArticle{title='Asthme'}, WikiArticle{title='Arvo Pärt'}, WikiArticle{title='Akseli Gallen-Kallela'}, WikiArticle{title='America Online'}, WikiArticle{title='Alphabet phonétique international'}, WikiArticle{title='Anarchie'}, WikiArticle{title='Astéroïde'}, WikiArticle{title='Albanais'}, WikiArticle{title='Arménien'}, WikiArticle{title='Alfred de Musset'}, WikiArticle{title='Aïkibudo'}, WikiArticle{title='Agriculture durable'}, WikiArticle{title='Alchimie'}, WikiArticle{title='Anastylose'}, WikiArticle{title='Andrew Wiles'}, WikiArticle{title='Alvar Aalto'}, WikiArticle{title='Anarcho-capitalisme'}, WikiArticle{title='Amblyseius'}, WikiArticle{title='Aleochara'}, WikiArticle{title='Aruba'}, WikiArticle{title='Accusatif'}, WikiArticle{title='Arthur Honegger'}, WikiArticle{title='Alain-Fournier'}, WikiArticle{title='Antonin Artaud'}, WikiArticle{title='Lampe à incandescence classique'}, WikiArticle{title='Lampe à incandescence halogène'}, WikiArticle{title='Amplificateur électronique'}, WikiArticle{title='Alcatel'}, WikiArticle{title='Juillet 2003'}, WikiArticle{title='Archaea'}, WikiArticle{title='Ahmôsis II'}, WikiArticle{title='Aldous Huxley'}, WikiArticle{title='Amenhotep III'}, WikiArticle{title='Aviation civile'}, WikiArticle{title='Auteur-compositeur-interprète'}, WikiArticle{title='Animisme'}, WikiArticle{title='Anthropologie religieuse'}, WikiArticle{title='Alphabet phonétique de l'OTAN'}, WikiArticle{title='ADSL'}, WikiArticle{title='Active Server Pages'}, WikiArticle{title='Agnosticisme'}, WikiArticle{title='Morse (alphabet)'}, WikiArticle{title='Australopithèque'}, WikiArticle{title='Antoine Parmentier'}, WikiArticle{title='Halobacteria'}, WikiArticle{title='Géographie de l'Arabie saoudite'}, WikiArticle{title='Industrie pétrolière de l'Arabie saoudite'}, WikiArticle{title='Économie de l'Arabie saoudite'}, WikiArticle{title='Histoire économique de l'Arabie saoudite'}, WikiArticle{title='Politique en Arabie saoudite'}, WikiArticle{title='Blender'}, WikiArticle{title='Biologie moléculaire'}, WikiArticle{title='Belgique'}, WikiArticle{title='Bruxelles'}, WikiArticle{title='Forme de Backus-Naur'}, WikiArticle{title='Bourgogne'}, WikiArticle{title='Basse-Normandie'}, WikiArticle{title='Bas-Rhin'}, WikiArticle{title='Bouches-du-Rhône'}, WikiArticle{title='Biologie'}, WikiArticle{title='Brésil'}, WikiArticle{title='Bangladesh'}, WikiArticle{title='Boys band'}, WikiArticle{title='Baguettes (couverts asiatiques)'}, WikiArticle{title='Bahamas'}, WikiArticle{title='Bénin'}, WikiArticle{title='Bulgarie'}, WikiArticle{title='Bouddhisme'}, WikiArticle{title='BEL20'}, WikiArticle{title='Bretèche'}, WikiArticle{title='Barbacane'}, WikiArticle{title='Bastet'}, WikiArticle{title='Beaufort'}, WikiArticle{title='Beaujolais'}, WikiArticle{title='Baal'}, WikiArticle{title='Baba'}, WikiArticle{title='Bès'}, WikiArticle{title='PCI (informatique)'}, WikiArticle{title='Bruno Mégret'}, WikiArticle{title='Billy Wilder'}, WikiArticle{title='Bille August'}, WikiArticle{title='Blues'}, WikiArticle{title='Bioéthique'}, WikiArticle{title='Brive-la-Gaillarde'}, WikiArticle{title='Burdigala'}, WikiArticle{title='Bouliac'}, WikiArticle{title='Bible'}, WikiArticle{title='Liste de biologistes'}, WikiArticle{title='Boulier'}, WikiArticle{title='Butane'}, WikiArticle{title='Brahmane'}, WikiArticle{title='Bloodlust'}, WikiArticle{title='BASIC'}]
```
Then, we process each into separate language models

Code from [TrieClassificationBlog.java:39](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L39) executed in 52.28 seconds: 
```java
      CharTrie charTrie = CharTrieIndex.indexFulltext(english.subList(0,trainingSize)
              .stream().map(x->x.getText()).collect(Collectors.toList()), maxLevels, minWeight);
      print(charTrie);
      return charTrie;
```
Logging: 
```
    Total Indexed Document (KB): 6073
    Total Node Count: 1122907
    Total Index Memory Size (KB): 49153
    
```

Returns: 
```
    com.simiacryptus.util.text.CharTrieIndex@678d4f40
```
Code from [TrieClassificationBlog.java:45](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L45) executed in 32.38 seconds: 
```java
      CharTrie charTrie = CharTrieIndex.indexFulltext(french.subList(testingSize,french.size())
              .stream().map(x->x.getText()).collect(Collectors.toList()), maxLevels, minWeight);
      print(charTrie);
      return charTrie;
```
Logging: 
```
    Total Indexed Document (KB): 3147
    Total Node Count: 712198
    Total Index Memory Size (KB): 24577
    
```

Returns: 
```
    com.simiacryptus.util.text.CharTrieIndex@ed7265d8
```
The models can be used to perform PPM-based classification with excellent results:

Code from [TrieClassificationBlog.java:52](../../src/test/java/com/simiacryptus/util/text/TrieClassificationBlog.java#L52) executed in 117.20 seconds: 
```java
      NodewalkerCodec codecA = trieEnglish.getCodec();
      NodewalkerCodec codecB = trieFrench.getCodec();
      double englishAccuracy = 100.0 * english.stream().limit(testingSize).mapToDouble(tweet -> {
          Bits encodeB = codecB.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          Bits encodeA = codecA.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          return (encodeB.bitLength > encodeA.bitLength) ? 1 : 0;
      }).average().getAsDouble();
      double frenchAccuracy = 100.0 * french.stream().limit(testingSize).mapToDouble(tweet -> {
          Bits encodeB = codecB.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          Bits encodeA = codecA.encodePPM(tweet.getText(), Integer.MAX_VALUE);
          return (encodeB.bitLength < encodeA.bitLength) ? 1 : 0;
      }).average().getAsDouble();
      return String.format("Accuracy = %.3f%%, %.3f%%", englishAccuracy, frenchAccuracy);
```

Returns: 
```
    Accuracy = 100.000%, 99.000%
```
